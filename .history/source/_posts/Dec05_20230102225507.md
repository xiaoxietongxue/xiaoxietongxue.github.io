---
title: Dec05
date: 2022-12-05 23:24:43
toc: true
tags: 
categories: 
 - 每日工作总结
password: C91920010812
message: 靓仔美女们输个密码呗
cover: img/清华大学.png

description: 每天的学习点滴～
---
# 技术文件——20221203工作日志			拟制：解辰锋

# 本文中的所有信息均为清华大学内部消息，不得向外传播

# 1.学习记录

## CAN

### 报文帧的种类和帧格式的解析

#### 报文帧种类

+ 数据帧：用于发送节点向接收节点发送数据（是用得最多的帧格式）
+ 远程帧：接收节点向发送节点发送请求数据
+ 错误帧：用于当某节点检测出错误的时候向其他节点通知错误的帧
+ 过载帧：用于接收节点向发送节点通知自身接受能力的帧
+ 帧间隔（ITM）：将数据帧与远程帧与前面的帧分离的帧

这些帧都可以通过示波器观测到

#### 数据帧

+ 分为标准帧和扩展帧

<img src="Dec05/image-20221206001616027.png" alt="image-20221206001616027" style="zoom:50%;" />

扩展帧的“扩展”主要体现在仲裁段和控制段

+ 帧起始：SOF，由一个显性位构成。总线空闲的时候，发送节点发出帧起始，接受节点与之进行同步
+ 仲裁段
  + <img src="Dec05/image-20221205004551127.png" alt="image-20221205004551127" style="zoom:50%;" />
+ 控制段

<img src="Dec05/image-20221205005015075.png" alt="image-20221205005015075" style="zoom: 33%;" />

+ 数据段

<img src="Dec05/image-20221205005226255.png" alt="image-20221205005226255" style="zoom:50%;" />

+ CRC段

<img src="Dec05/image-20221205005541047.png" alt="image-20221205005541047" style="zoom:50%;" />

<img src="Dec05/image-20221205005626515.png" alt="image-20221205005626515" style="zoom:50%;" />

+ ACK段

<img src="Dec05/image-20221205005754421.png" alt="image-20221205005754421" style="zoom:50%;" />

+ 帧结束

<img src="Dec05/image-20221205010056296.png" alt="image-20221205010056296" style="zoom:50%;" />

一般来说，当总线检测到11个连续的隐性位时，会认定总线空闲。因为帧间隔由3个连续的隐性位构成，再加上SOF，共11个

##### 位长度计算

<img src="Dec05/image-20221205010452492.png" alt="image-20221205010452492" style="zoom:50%;" />

答案是否定的，还存在位填充

#### 远程帧

+ <img src="Dec05/image-20221205084949954.png" alt="image-20221205084949954" style="zoom:50%;" />

#### 错误帧

<img src="Dec05/image-20221205090847094.png" alt="image-20221205090847094" style="zoom:50%;" />

### CAN非破坏性仲裁机制

+ 发生在仲裁段
+ 采用“线与”机制
+ ID越小，优先级越高
+ 仲裁失败进入“只听”模式

<img src="Dec05/image-20221205085522495.png" alt="image-20221205085522495" style="zoom:50%;" />

### CAN节点状态与错误处理机制

#### CAN错误类型

+ CRC错误：接受节点接受的CRC值与发送节点发送的CRC不同
+ 位填充错误：传输信号违反“位填充“规则
+ 应答错误：发送节点在ACK阶段没有接收到应答信号
+ 位发送错误：发送节点在发送时检测总线电平与发送电平不同
+ 格式错误：传输的数据帧格式与任何一种合法的数据帧不同

## 参考资料

### 视频资源

[CAN数据链路层详解篇_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1gD4y1U7bJ/?p=2&spm_id_from=pageDriver&vd_source=2d5ec0a230549ed2b672ea4be8a2cc58)

### 博客资源

# 2.问题

# 3.下一步计划

继续强化CAN基础理论的学习

# 本文中的所有信息均为清华大学内部消息，不得向外传播
